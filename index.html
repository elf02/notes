<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAAAXNSR0IArs4c6QAACsNJREFUeJzt3U+oHWcZx/Fv0hqT3lZE2hqDkDTFSKuxsdUmtFKlgtByay1SXKhdhJRcXXUjwYUgBQU3lioiVlw0C7WF0lZbhSLcWoz9Yxtv8weMWtCApqZK0PwzAW9czClcpDbnzvu+884z8/3AQ3Zznnnn+eXMPWdmDkiSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEl1rajdQEUXA7PAFuBdwGWTunzy75p6rekNnAaOAq9N6ihwBFgAngRO1GutnrEF+FLgDuBTwMeBt9ZtR5mcAX4BPAo8Dvy9bjvK7SM0B/icNYp6CtiKwrua5vSq9kBZdepx4CoUzhXAD4FF6g+RVbf+A+wGNqAQ7qT5m6j24Fj9qtPA7ai3VgBfp/6gWP2tReArqHcuwr91renrMWA16oW1wD7qD4UVq/YC7yS46N8DrwGeAz5QuxGFtADcQPP3cUgrazeQ6GEMr9rbAvy4dhMpLqjdQIJ7gbtrN6Hw3kvzRvZ07UbG5NPU/xvKGlbdSUAR/wa+DPgTzSfPUi4ngY00N0mEEfEU+j5gW+0mNDirgLcBT9RuZDmivQNfDRwgXt+KYZHm2unf125kWtE+hf4mhlflrATur93EckQKw0fxk0J142ZgvnYT04j0Dvzl2g1oNL5Uu4FpRXkHvgQ4RswP3RTPWZpvO/5Vu5HzubB2A1O6jfLh/QnwIs01si8BrxZ+PS3PWuC6JfXJgq+1CrgFeKjga4zKI5T7Av8V4MPd7YoyuYHmeoBSc/Fwd7sybGuAU5Q5SN/DC0Iiuxh4gDKzcYrmnViJ7qDMAfpOlzuhor5LmRmZ7XInhupr5D8wf8QbuodkhjKn01/tcifaiPA10uWZt7cIfAb4d+btqp6TwGdpQpdT7tnLLkKAcz814dc0nzJrWPYAz2feZu+f2DHGAD+XeXvqj2czb88AZ5D7NMYAD1fuAPf+FDqCs+T9YOLSbttXh95N3ln5Z7ftL1+ESylzfzARYZ/V3qjmJcIptKT/wwBLgRlgKTADLAVmgKXADLAUmAGWAjPAUmAGWAosyjOxIpoFtgLXTmpt3XY6d4Tm+WJ7gRcI9osHyif3TdqlbaS5ta3EEyIi157J2pQWbV4GL9IB2QEcL9DzUOo4sL316k4n0ryMQpQDMleg16HWXMs1nkaUecmi13daTORexBL7fCXwMs2zmXR+J4FraB7pm1uEecnGT6HTrQR2Y3iXYwZ4EOcvmQuY7nqah4xreW6kWTslMMDp/LHx9ly7RAY4nUPYnmuXyACncwjbc+0SGeB0/sJDe65dIgOcbqF2A4G5dokMcDqHsD3XLpEBTucQtufaJer1VSYTfb+yZobmFwE2Z97u0B2k+R74VObt9n1esup1cxMRDshm4EX8QehpnaW5xfJggW1HmJdsPIXOYz+wq3YTgeyiTHjVQ5HuLtmJtxO+WR0D7mq9utOJNC+jEO2AbADmC/QdveaBdQnrOq1o85Kk1+f3E7kXsat93gTctKTWd/S6fXEYeGZJHerodaPOSyu9bm5iVAdEyUY1L36IJQVmgKXADLAUmAGWAjPAUmAGWArMAEuBGWApMAMsBWaApcAMsBSYAZYCM8BSYAZYCswAS4EZYCkwAywFZoClwAywFNiFtRsYsFlgK80DzK8F1tZtp3NHgL2TegF4om47qiXaY0I3AnsK9B299kzWprRo8zJ4kQ7IDnyw+5vVcWB769WdTqR5GYUoB2SuQK9DrbmWazyNKPOSRa+feTuRexFL7POVwMs0v1So8zsJXAO8UmDbEeYlGz+FTrcS2I3hXY4Z4EGcv2QuYLrrgRtqNxHQjTRrpwQGON222g0E5tolMsDpHML2XLtEBjidQ9iea5fIAKdbXbuBwFy7RAY43ULtBgJz7RIZ4HQOYXuuXSIDnM4hbM+1S9Trq0wm+n5lzQzwLLA583aH7iDN98CnMm+37/OSVa+bm4hwQDYDLwKrCmx7iM7S3GJ5sMC2I8xLNp5C57Ef2FW7iUB2USa86qFId5fsxNsJ36yOAXe1Xt3pRJqXUYh2QDYA8wX6jl7zwLqEdZ1WtHlJ0uvz+4nci9jVPm8CblpS6zt63b44DDyzpA519LpR56WVXjc3MaoDomSjmhc/xJICM8BSYAZYCswAS4EZYCkwAywFZoClwAywFJgBlgIzwFJgBlgKzABLgRlgKTADLAVmgKXADLAUmAGWAjPAUmAGWArswtoNDNgssJXmAebXAmvrtnNeR4C9k3oBeKJuOxqKaI8J3QjsKdB317Vnsi/RRJuXwYt0QHYwrAe7Hwe2Z12h8iLNyyhEOSBzBXrtS81lXKfSoszLaEQ4IFcCJwr02pc6MdnHCCLMSzZ+Cp1uJbCb5mdGh2oGeBDnRS30/X/UbQV67Gtty7RmJfV9XrLyf9R0EYY6lzHtawgGON2YhnpM+xqCAU43pqEe076GYIDTra7dQIfGtK8hGOB0C7Ub6NCY9jUEA5xuTEM9pn0NwQCnG9NQj2lflUnfv9ebAfYV6LNvdQC4KNOaldT3eRmdCAdkM3CmQK99qTPA+7KtVlkR5mVUohyQewr02pe6J+M6lRZlXkYj0gHZybBuJzwG3JV1hcqLNC+jEO2AbADmC/Tddc0D6zKvTReizUuSFbUbmELuRexqnzcBNy2p9R29bluHgWeW1KG67bQWdV5a6XVzE6M6IEo2qnnxe2ApMAMsBWaApcAMsBSYAZYCM8BSYAZYCswAS4EZYCkwAywFZoClwAywFJgBlgIzwFJgBlgKzABLgRlgKTADLAVmgKXADLAUmAGWAjPAUmAGWArMAEuBGWApMAMsBWaApcAMsBSYAZYCixDgk5m3tzbz9tQfuY/ticzbyy5CgF/NvL0tmben/vhg5u3lnr3sIgT4b5m3Z4CHywD3kAHWtAxwD+VexNuBTZm3qfreA8xm3qYBziD3O/Bq4BFgVebtqp5VwKM0xzan3gc4gtuAcwXqvi53QkV9mzIzckuXOzFUq4AzlDlA3wdmutsVZXYJ8APKzMYpPEvL5knKHKRzwGHgxu52RZl8DPgL5ebi8e52Zfi+QLkD9Xr9DngA+Bywrpvd0jKsBz5Pc9Z0iPLzcHc3u5VmRe0GprSO5n9bqSuXAv+o3cT5RPgUGuCvwMu1m9BovESA8EKcAAN8q3YDGo37azcwrSin0ND0egC4unYjGrQF8l/RVUykd+BzwBdrN6HBm6vdwHJECjDAL4HHajehwXoIeL52E8sR6RT6deuBPwBvqd2IBuUMcAVwpHYjyxHtHRjgz8DO2k1ocLYTLLwAF9RuoKUF4O3AttqNaBC+gdfGd24l8BTlr8ixhl0/JeafkkDgxidmgN8AV9VuRCHtozmLO127kbYi/g281EngZuC3tRtROHuBTxA4vENyEc3XS7VPx6wY9Rj5b/5XBvdSfzis/tYizYyox+6kOS2qPSxWv+o0zfPQFMAGmqtqag+NVb8WgR/RzISC+RDwK+oPkVWnnsbHCA/CLM2dTLUHyuqm9gO3MgLRvwdejhXAdTRPGrwVuJ74X6OpsUhzE8LPgZ/RfEV0rmpHHRlTgP/XO2jC/H6aR/ZcNqnLJ/+uqdea3sBp4Cjw2qSO0ly7vJ8muMfqtSZJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiSN138BpE1XqE8Zv1wAAAAASUVORK5CYII=">
    <title>Notes</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    <style>
      [x-cloak] {
        display: none;
      }
    </style>
</head>
<body class="font-sans bg-gray-100 antialiased">
  <div x-data="notes()" x-init="init()" x-cloak class="notes-app">
    <div class="flex flex-col md:flex-row h-screen">
      <div class="w-full md:w-3/12 lg:w-2/12 bg-indigo-darker text-white overflow-auto">
        <ul class="notes-list list-none">
          <template x-for="note in notes" :key="note.id">
            <li
              class="cursor-pointer mb-1 px-2 py-1 overflow-x-hidden"
              :class="{ 'bg-green-600': note.id === editedNote.id }"
            >
              <div class="flex items-center">
                <a
                  class="block flex-grow break-words"
                  x-text="formatTitle(note)"
                  @click.prevent="editNote(note)">
                </a>
                <a
                  class="block text-xs hover:text-red-500 transition duration-200 ease-in-out"
                  @click.prevent="deleteNote(note)"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="ml-auto w-5 h-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                  </svg>
                </a>
              </div>
            </li>
          </template>
          <li class="cursor-pointer my-2 flex justify-center">
            <button
              class="mx-1 outline-none focus:outline-none hover:text-teal-dark transition duration-200 ease-in-out"
              title="new Note"
              @click="addNote()"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" />
              </svg>
            </button>
            <button
              class="mx-1 outline-none focus:outline-none text-red-500 animate-bounce"
              title="Save"
              x-show="!saved"
              @click="save()"
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                <path d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z" />
              </svg>
            </button>
          </li>
        </ul>
      </div>
      <div class="w-full flex-grow md:w-9/12 lg:w-10/12 bg-gray-100">
        <textarea
          class="w-full h-full bg-gray-100 py-2 px-5 outline-none"
          x-show="editedNote.id !== null"
          @keyup="saved = false"
          @input.debounce.2000="save()"
          x-model="editedNote.body"
        ></textarea>
      </div>
    </div>
  </div>

  <script>
    window.noteStore = {
      notes: JSON.parse(localStorage.getItem('note-store') || '[]'),
      saved: true,

      save() {
          localStorage.setItem('note-store', JSON.stringify(this.notes));
          this.saved = true;
      },
    };

    window.notes = function () {
      return {
        ...noteStore,
        editedNote: {
          id: null,
          body: ''
        },

        init() {
          if (this.notes.length) {
            this.editNote(this.notes[0]);
          }
        },

        formatTitle(note) {
          return note.body.split('\n')[0].substr(0, 15).trim().replace(/(\r\n|\n|\r)/gm, '') + '...';
        },

        editNote(note) {
          this.editedNote = note;

          this.save();
        },

        addNote() {
          this.notes.push({
            id: Date.now(),
            body: 'new Note'
          });

          this.save();
        },

        deleteNote(note) {
          let position = this.notes.indexOf(note);
          this.notes.splice(position, 1);

          if (note.id === this.editedNote.id) {
            this.editedNote.id = null;
            this.editedNote.body = '';
          }

          this.save();
        }
      }
    };
  </script>
</body>
</html>
